function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _libProvider = require("../lib/provider");

var _libProvider2 = _interopRequireDefault(_libProvider);

describe("Provider", function () {
  var provider = undefined;

  beforeEach(function () {
    provider = new _libProvider2["default"]();
  });
  afterEach(function () {
    provider.dispose();
  });

  it("emits add event properly", function () {
    var timesTriggered = 0;

    provider.onDidAdd(function (title) {
      if (timesTriggered === 0) {
        expect(title).toEqual({ title: "First", options: undefined });
      } else if (timesTriggered === 1) {
        expect(title).toEqual({ title: "Second", options: undefined });
      } else if (timesTriggered === 2) {
        expect(title).toEqual({ title: "Third", options: undefined });
      } else {
        expect(false).toBe(true);
      }
      timesTriggered++;
    });
    expect(timesTriggered).toBe(0);
    provider.add("First");
    expect(timesTriggered).toBe(1);
    provider.add("Second");
    expect(timesTriggered).toBe(2);
    provider.add("Third");
    expect(timesTriggered).toBe(3);
  });
  it("emits remove event properly", function () {
    var timesTriggered = 0;

    provider.onDidRemove(function (title) {
      if (timesTriggered === 0) {
        expect(title).toBe("First");
      } else if (timesTriggered === 1) {
        expect(title).toBe("Second");
      } else if (timesTriggered === 2) {
        expect(title).toBe("Third");
      } else {
        expect(false).toBe(true);
      }
      timesTriggered++;
    });

    expect(timesTriggered).toBe(0);
    provider.remove("First");
    expect(timesTriggered).toBe(1);
    provider.remove("Second");
    expect(timesTriggered).toBe(2);
    provider.remove("Third");
    expect(timesTriggered).toBe(3);
  });
  it("emits clear event properly", function () {
    var timesTriggered = 0;

    provider.onDidClear(function () {
      timesTriggered++;
    });

    expect(timesTriggered).toBe(0);
    provider.clear();
    expect(timesTriggered).toBe(1);
    provider.clear();
    expect(timesTriggered).toBe(2);
    provider.clear();
    expect(timesTriggered).toBe(3);
    provider.clear();
    expect(timesTriggered).toBe(4);
  });
  it("emits destroy event properly", function () {
    var timesTriggered = 0;

    provider.onDidDispose(function () {
      timesTriggered++;
    });

    expect(timesTriggered).toBe(0);
    provider.dispose();
    expect(timesTriggered).toBe(1);
    provider.dispose();
    expect(timesTriggered).toBe(1);
    provider.dispose();
    expect(timesTriggered).toBe(1);
    provider.dispose();
    expect(timesTriggered).toBe(1);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2FyY2hpZS8uYXRvbS9wYWNrYWdlcy9idXN5LXNpZ25hbC9zcGVjL3Byb3ZpZGVyLXNwZWMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7MkJBRXFCLGlCQUFpQjs7OztBQUV0QyxRQUFRLENBQUMsVUFBVSxFQUFFLFlBQVc7QUFDOUIsTUFBSSxRQUFRLFlBQUEsQ0FBQzs7QUFFYixZQUFVLENBQUMsWUFBVztBQUNwQixZQUFRLEdBQUcsOEJBQWMsQ0FBQztHQUMzQixDQUFDLENBQUM7QUFDSCxXQUFTLENBQUMsWUFBVztBQUNuQixZQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7R0FDcEIsQ0FBQyxDQUFDOztBQUVILElBQUUsQ0FBQywwQkFBMEIsRUFBRSxZQUFXO0FBQ3hDLFFBQUksY0FBYyxHQUFHLENBQUMsQ0FBQzs7QUFFdkIsWUFBUSxDQUFDLFFBQVEsQ0FBQyxVQUFTLEtBQUssRUFBRTtBQUNoQyxVQUFJLGNBQWMsS0FBSyxDQUFDLEVBQUU7QUFDeEIsY0FBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7T0FDL0QsTUFBTSxJQUFJLGNBQWMsS0FBSyxDQUFDLEVBQUU7QUFDL0IsY0FBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7T0FDaEUsTUFBTSxJQUFJLGNBQWMsS0FBSyxDQUFDLEVBQUU7QUFDL0IsY0FBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7T0FDL0QsTUFBTTtBQUNMLGNBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7T0FDMUI7QUFDRCxvQkFBYyxFQUFFLENBQUM7S0FDbEIsQ0FBQyxDQUFDO0FBQ0gsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3RCLFVBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsWUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN2QixVQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9CLFlBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDdEIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUNoQyxDQUFDLENBQUM7QUFDSCxJQUFFLENBQUMsNkJBQTZCLEVBQUUsWUFBVztBQUMzQyxRQUFJLGNBQWMsR0FBRyxDQUFDLENBQUM7O0FBRXZCLFlBQVEsQ0FBQyxXQUFXLENBQUMsVUFBUyxLQUFLLEVBQUU7QUFDbkMsVUFBSSxjQUFjLEtBQUssQ0FBQyxFQUFFO0FBQ3hCLGNBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7T0FDN0IsTUFBTSxJQUFJLGNBQWMsS0FBSyxDQUFDLEVBQUU7QUFDL0IsY0FBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztPQUM5QixNQUFNLElBQUksY0FBYyxLQUFLLENBQUMsRUFBRTtBQUMvQixjQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO09BQzdCLE1BQU07QUFDTCxjQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO09BQzFCO0FBQ0Qsb0JBQWMsRUFBRSxDQUFDO0tBQ2xCLENBQUMsQ0FBQzs7QUFFSCxVQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9CLFlBQVEsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLFVBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsWUFBUSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6QixVQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0dBQ2hDLENBQUMsQ0FBQztBQUNILElBQUUsQ0FBQyw0QkFBNEIsRUFBRSxZQUFXO0FBQzFDLFFBQUksY0FBYyxHQUFHLENBQUMsQ0FBQzs7QUFFdkIsWUFBUSxDQUFDLFVBQVUsQ0FBQyxZQUFXO0FBQzdCLG9CQUFjLEVBQUUsQ0FBQztLQUNsQixDQUFDLENBQUM7O0FBRUgsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixZQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakIsVUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUNoQyxDQUFDLENBQUM7QUFDSCxJQUFFLENBQUMsOEJBQThCLEVBQUUsWUFBVztBQUM1QyxRQUFJLGNBQWMsR0FBRyxDQUFDLENBQUM7O0FBRXZCLFlBQVEsQ0FBQyxZQUFZLENBQUMsWUFBVztBQUMvQixvQkFBYyxFQUFFLENBQUM7S0FDbEIsQ0FBQyxDQUFDOztBQUVILFVBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsWUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ25CLFVBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsWUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ25CLFVBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsWUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ25CLFVBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsWUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ25CLFVBQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDaEMsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL2FyY2hpZS8uYXRvbS9wYWNrYWdlcy9idXN5LXNpZ25hbC9zcGVjL3Byb3ZpZGVyLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgUHJvdmlkZXIgZnJvbSBcIi4uL2xpYi9wcm92aWRlclwiO1xuXG5kZXNjcmliZShcIlByb3ZpZGVyXCIsIGZ1bmN0aW9uKCkge1xuICBsZXQgcHJvdmlkZXI7XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpIHtcbiAgICBwcm92aWRlciA9IG5ldyBQcm92aWRlcigpO1xuICB9KTtcbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xuICAgIHByb3ZpZGVyLmRpc3Bvc2UoKTtcbiAgfSk7XG5cbiAgaXQoXCJlbWl0cyBhZGQgZXZlbnQgcHJvcGVybHlcIiwgZnVuY3Rpb24oKSB7XG4gICAgbGV0IHRpbWVzVHJpZ2dlcmVkID0gMDtcblxuICAgIHByb3ZpZGVyLm9uRGlkQWRkKGZ1bmN0aW9uKHRpdGxlKSB7XG4gICAgICBpZiAodGltZXNUcmlnZ2VyZWQgPT09IDApIHtcbiAgICAgICAgZXhwZWN0KHRpdGxlKS50b0VxdWFsKHsgdGl0bGU6IFwiRmlyc3RcIiwgb3B0aW9uczogdW5kZWZpbmVkIH0pO1xuICAgICAgfSBlbHNlIGlmICh0aW1lc1RyaWdnZXJlZCA9PT0gMSkge1xuICAgICAgICBleHBlY3QodGl0bGUpLnRvRXF1YWwoeyB0aXRsZTogXCJTZWNvbmRcIiwgb3B0aW9uczogdW5kZWZpbmVkIH0pO1xuICAgICAgfSBlbHNlIGlmICh0aW1lc1RyaWdnZXJlZCA9PT0gMikge1xuICAgICAgICBleHBlY3QodGl0bGUpLnRvRXF1YWwoeyB0aXRsZTogXCJUaGlyZFwiLCBvcHRpb25zOiB1bmRlZmluZWQgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHBlY3QoZmFsc2UpLnRvQmUodHJ1ZSk7XG4gICAgICB9XG4gICAgICB0aW1lc1RyaWdnZXJlZCsrO1xuICAgIH0pO1xuICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSgwKTtcbiAgICBwcm92aWRlci5hZGQoXCJGaXJzdFwiKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMSk7XG4gICAgcHJvdmlkZXIuYWRkKFwiU2Vjb25kXCIpO1xuICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSgyKTtcbiAgICBwcm92aWRlci5hZGQoXCJUaGlyZFwiKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMyk7XG4gIH0pO1xuICBpdChcImVtaXRzIHJlbW92ZSBldmVudCBwcm9wZXJseVwiLCBmdW5jdGlvbigpIHtcbiAgICBsZXQgdGltZXNUcmlnZ2VyZWQgPSAwO1xuXG4gICAgcHJvdmlkZXIub25EaWRSZW1vdmUoZnVuY3Rpb24odGl0bGUpIHtcbiAgICAgIGlmICh0aW1lc1RyaWdnZXJlZCA9PT0gMCkge1xuICAgICAgICBleHBlY3QodGl0bGUpLnRvQmUoXCJGaXJzdFwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGltZXNUcmlnZ2VyZWQgPT09IDEpIHtcbiAgICAgICAgZXhwZWN0KHRpdGxlKS50b0JlKFwiU2Vjb25kXCIpO1xuICAgICAgfSBlbHNlIGlmICh0aW1lc1RyaWdnZXJlZCA9PT0gMikge1xuICAgICAgICBleHBlY3QodGl0bGUpLnRvQmUoXCJUaGlyZFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV4cGVjdChmYWxzZSkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICAgIHRpbWVzVHJpZ2dlcmVkKys7XG4gICAgfSk7XG5cbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMCk7XG4gICAgcHJvdmlkZXIucmVtb3ZlKFwiRmlyc3RcIik7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDEpO1xuICAgIHByb3ZpZGVyLnJlbW92ZShcIlNlY29uZFwiKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMik7XG4gICAgcHJvdmlkZXIucmVtb3ZlKFwiVGhpcmRcIik7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDMpO1xuICB9KTtcbiAgaXQoXCJlbWl0cyBjbGVhciBldmVudCBwcm9wZXJseVwiLCBmdW5jdGlvbigpIHtcbiAgICBsZXQgdGltZXNUcmlnZ2VyZWQgPSAwO1xuXG4gICAgcHJvdmlkZXIub25EaWRDbGVhcihmdW5jdGlvbigpIHtcbiAgICAgIHRpbWVzVHJpZ2dlcmVkKys7XG4gICAgfSk7XG5cbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMCk7XG4gICAgcHJvdmlkZXIuY2xlYXIoKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMSk7XG4gICAgcHJvdmlkZXIuY2xlYXIoKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMik7XG4gICAgcHJvdmlkZXIuY2xlYXIoKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMyk7XG4gICAgcHJvdmlkZXIuY2xlYXIoKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoNCk7XG4gIH0pO1xuICBpdChcImVtaXRzIGRlc3Ryb3kgZXZlbnQgcHJvcGVybHlcIiwgZnVuY3Rpb24oKSB7XG4gICAgbGV0IHRpbWVzVHJpZ2dlcmVkID0gMDtcblxuICAgIHByb3ZpZGVyLm9uRGlkRGlzcG9zZShmdW5jdGlvbigpIHtcbiAgICAgIHRpbWVzVHJpZ2dlcmVkKys7XG4gICAgfSk7XG5cbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMCk7XG4gICAgcHJvdmlkZXIuZGlzcG9zZSgpO1xuICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSgxKTtcbiAgICBwcm92aWRlci5kaXNwb3NlKCk7XG4gICAgZXhwZWN0KHRpbWVzVHJpZ2dlcmVkKS50b0JlKDEpO1xuICAgIHByb3ZpZGVyLmRpc3Bvc2UoKTtcbiAgICBleHBlY3QodGltZXNUcmlnZ2VyZWQpLnRvQmUoMSk7XG4gICAgcHJvdmlkZXIuZGlzcG9zZSgpO1xuICAgIGV4cGVjdCh0aW1lc1RyaWdnZXJlZCkudG9CZSgxKTtcbiAgfSk7XG59KTtcbiJdfQ==